type NetworkMember @entity {
  id: ID!
  ambassador: Ambassador!
  creditRequests: [CreditRequest]! @derivedFrom(field: "networkMember")
  creditLine: CreditLine! @derivedFrom(field: "networkMember")
  sourceBalance: BigInt!
}

type Ambassador @entity {
  id: ID!
  memberships: [NetworkMember]! @derivedFrom(field: "ambassador")
  rewards: BigInt!
  creditAllowance: BigInt!
}

type Underwriter @entity {
  id: ID!
  pools: [CreditPool]! @derivedFrom(field: "underwriter")
  rewards: BigInt!
}

type CreditLine @entity {
  id: ID!
  pool: CreditPool!
  networkMember: NetworkMember
  network: Bytes!
  issueDate: BigInt!
  acitve: Boolean!
  creditLimit: BigInt!
  creditBalance: BigInt!
  balance: BigInt!
}

type CreditPool @entity {
  id: ID!
  underwriter: Underwriter!
  creditLines: [CreditLine]! @derivedFrom(field: "pool")
  totalCredit: BigInt!
  totalCollateral: BigInt!
  active: Boolean!
}

type CreditRequest @entity {
  id: ID!
  networkMember: NetworkMember!
  type: RequestType!
  approved: Boolean!
  creditLimit: BigInt!
}

enum RequestType {
  New
  Unstaking
  Extension
}
