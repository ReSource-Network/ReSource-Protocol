type NetworkMember @entity {
  id: ID!
  ambassador: Ambassador!
  creditRequests: [CreditRequest]! @derivedFrom(field: "networkMember")
}

type Ambassador @entity {
  id: ID!
  memberships: [NetworkMember]! @derivedFrom(field: "ambassador")
  rewards: BigInt!
  creditAllowance: BigInt!
}

type Underwriter @entity {
  id: ID!
  pools: [CreditPool]! @derivedFrom(field: "underwriter")
  rewards: BigInt!
}

type CreditLine @entity {
  id: ID!
  pool: CreditPool!
  network: bytes!
  issueDate: BigInt!
  acitve: Boolean!
}

type CreditPool @entity {
  id: ID!
  underwriter: Underwriter!
  creditLines: [CreditLine]! @derivedFrom(field: "pool")
  totalCredit: BigInt!
}

type CreditRequest @entity {
  id: ID!
  networkMember: NetworkMember!
  type: RequestType!
  approved: Boolean!
  creditLimit: BigInt!
}

enum RequestType {
  New
  Unstaking
  Extension
}
