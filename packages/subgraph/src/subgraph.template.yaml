specVersion: 0.0.2
features:
  - ipfsOnEthereumContracts
schema:
  file: ./src/schema.graphql
dataSources:
  - kind: ethereum/contract
    name: NetworkRoles
    network: "{{network}}"
    source:
      address: "{{NetworkRolesAddress}}"
      abi: NetworkRoles
      startBlock: {{NetworkRolesStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - CreditLine
      abis:
        - name: NetworkRoles
          file: ./abis/NetworkRoles.json
      eventHandlers:
        - event: MemberAdded(address,address)
          handler: handleMemberAdded
      file: ./src/mapping/NetworkRoles/index.ts

  - kind: ethereum/contract
    name: CreditFeeManager
    network: "{{network}}"
    source:
      address: "{{CreditFeeManagerAddress}}"
      abi: CreditFeeManager
      startBlock: {{CreditFeeManagerStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - CreditLine
      abis:
        - name: CreditFeeManager
          file: ./abis/CreditFeeManager.json
      eventHandlers:
        - event: PoolRewardsUpdated(address,uint256)
          handler: handlePoolRewardsUpdated
        - event: UnderwriterRewardsStaked(address,uint256)
          handler: handleUnderwriterRewardsStaked
      file: ./src/mapping/CreditFeeManager/index.ts
  - kind: ethereum/contract
    name: CreditManager
    network: "{{network}}"
    source:
      address: "{{CreditManagerAddress}}"
      abi: CreditManager
      startBlock: {{CreditManagerStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - CreditLine
      abis:
        - name: CreditManager
          file: ./abis/CreditManager.json
      eventHandlers:
        - event: CreditPoolAdded(address,address)
          handler: handleCreditPoolAdded
        - event: CreditLineLimitUpdated(address,address,uint256)
          handler: handleCreditLineLimitUpdated
        - event: CreditLinePoolUpdated(address,address,address)
          handler: handleCreditLinePoolUpdated
        - event: CreditLineRemoved(address,address)
          handler: handleCreditLineRemoved
        - event: CreditLineRenewed(address,address,uint256)
          handler: handleCreditLineRenewed
        - event: CreditLineCreated(address,address,address,uint256,uint256)
          handler: handleCreditLineCreated
      file: ./src/mapping/CreditManager/index.ts
  - kind: ethereum/contract
    name: CreditRequest
    network: "{{network}}"
    source:
      address: "{{CreditRequestAddress}}"
      abi: CreditRequest
      startBlock: {{CreditRequestStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - CreditLine
      abis:
        - name: CreditRequest
          file: ./abis/CreditRequest.json
      eventHandlers:
        - event: CreditRequestCreated(address,address,address,uint256,bool)
          handler: handleCreditRequestCreated
        - event: CreditRequestUpdated(address,address,uint256,bool)
          handler: handleCreditRequestUpdated
        - event: CreditRequestRemoved(address,address)
          handler: handleCreditRequestRemoved
        - event: UnstakeRequestCreated(address,address)
          handler: handleUnstakeRequestCreated
      file: ./src/mapping/CreditRequest/index.ts
  - kind: ethereum/contract
    name: CreditRoles
    network: "{{network}}"
    source:
      address: "{{CreditRolesAddress}}"
      abi: CreditRoles
      startBlock: {{CreditRolesStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - CreditLine
      abis:
        - name: CreditRoles
          file: ./abis/CreditRoles.json
      eventHandlers:
        - event: UnderwriterAdded(address)
          handler: handleUnderwriterAdded
        - event: UnderwriterRemoved(address)
          handler: handleUnderwriterRemoved
      file: ./src/mapping/CreditRoles/index.ts
